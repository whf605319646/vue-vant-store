(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Order"],{3577:function(t,e,s){},7853:function(t,e,s){"use strict";var a=s("3577"),o=s.n(a);o.a},ac6a:function(t,e,s){for(var a=s("cadf"),o=s("0d58"),r=s("2aba"),i=s("7726"),d=s("32e9"),n=s("84f2"),c=s("2b4c"),l=c("iterator"),u=c("toStringTag"),f=n.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},v=o(h),L=0;L<v.length;L++){var m,p=v[L],b=h[p],g=i[p],A=g&&g.prototype;if(A&&(A[l]||d(A,l,f),A[u]||d(A,u,p),n[p]=f,b))for(m in a)A[m]||r(A,m,a[m],!0)}},bcc0:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide"}},[s("div",{staticClass:"order"},[s("van-nav-bar",{attrs:{title:"提交订单","left-text":"返回","left-arrow":"","z-index":10,fixed:""},on:{"click-left":t.goBack}}),s("div",{staticClass:"address",attrs:{editable:!1},on:{click:t.goAddressList}},[t.hasDefaultAddress?s("div",{staticClass:"next-icon"},[s("van-icon",{attrs:{name:"arrow"}})],1):t._e(),s("div",{staticClass:"address-item"},[s("div",{attrs:{address:"address-top"}},[s("van-icon",{attrs:{name:"location"}}),s("span",{staticClass:"user-info"},[t._v(t._s(t.hasDefaultAddress?t.defaultAddress.Name:"添加收货地址"))]),t.hasDefaultAddress?s("span",{staticClass:"phonenum"},[t._v(t._s(t.defaultAddress.Phonenum))]):t._e()],1),t.hasDefaultAddress?s("div",{staticClass:"address-bottom"},[s("div",{staticClass:"address-info"},[t._v(t._s(t.defaultAddress.Address)+t._s(t.defaultAddress.AddressDetail))])]):t._e()])]),t._l(t.orderGoodList,function(e){return s("van-panel",{key:e.Goodid,staticClass:"allGood",attrs:{title:"商品"}},[s("div",{staticClass:"allGood-item"},[s("van-card",{attrs:{title:e.Goodname,desc:e.Gooddescribe,num:e.Cartcount,price:e.GoodPriceaftersale,thumb:e.GoodImg}}),s("van-cell-group",[s("van-cell",{attrs:{title:"配送方式",value:e.Gooddealprice>0?"运费 ￥"+e.Gooddealprice:"免运费"}}),s("van-field",{attrs:{label:"留言",placeholder:"点击给买家留言"},model:{value:e.message,callback:function(s){t.$set(e,"message",s)},expression:"item.message"}}),s("van-cell",{staticStyle:{color:"#f44"},attrs:{title:"合计",value:"￥"+t.formatPrice(e.GoodPriceaftersale*e.Cartcount+e.Gooddealprice)}})],1)],1)])}),s("van-cell-group",{staticClass:"cell"},[s("van-cell",{attrs:{title:"优惠券码","is-link":"",value:"使用优惠券"}})],1),s("van-cell-group",{staticClass:"cell"},[s("van-switch-cell",{attrs:{title:"短信通知收件人"},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1),s("div",{staticClass:"order-footer"},[t._v("购物愉快~")]),s("van-submit-bar",{attrs:{price:t.totalMoney,"button-text":"结算"},on:{submit:t.onSubmit}})],2)])},o=[],r=s("c93e"),i=(s("ac6a"),s("2f62")),d=s("4ec3"),n={data:function(){return{checked:!0,addressList:[],hasDefaultAddress:!1,defaultAddress:{}}},mounted:function(){var t=this;this.orderGood.length?Object(d["e"])().then(function(e){t.addressList=e.data,t.addressId?e.data.forEach(function(e){if(e.Addressid===t.addressId)return t.defaultAddress=e,void(t.hasDefaultAddress=!0)}):e.data.forEach(function(e){if(1===e.Isdefault)return t.defaultAddress=e,void(t.hasDefaultAddress=!0)})}).catch(function(t){console.log(t)}):this.$router.push("/")},computed:Object(r["a"])({orderGoodList:function(){return this.orderGood.forEach(function(t){t.message=""}),this.orderGood},totalMoney:function(){var t=0;return this.orderGoodList.forEach(function(e){t+=e.GoodPriceaftersale*e.Cartcount+e.Gooddealprice}),100*t}},Object(i["b"])(["orderGood","addressId"])),methods:Object(r["a"])({onSubmit:function(){for(var t=this,e=[],s=0;s<this.orderGood.length;s++)e.push(this.orderGood[s].Goodid);var a={addressId:this.defaultAddress.Addressid,goods:this.orderGoodList,totalMoney:this.totalMoney/100};Object(d["b"])(a).then(function(s){console.log(s),t.$toast.success("付款成功~");var a={delId:e};Object(d["c"])(a).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),setTimeout(function(){t.$router.push("/OrderList")},500)}).catch(function(t){console.log(t)})},formatPrice:function(t){return t.toFixed(2)},goAddressList:function(){this.setAddressList(this.addressList),this.$router.push("/AddressList")},goBack:function(){this.$router.go(-1)}},Object(i["c"])({setAddressList:"SET_ADDRESSLIST_MUTATION"}))},c=n,l=(s("7853"),s("2877")),u=Object(l["a"])(c,a,o,!1,null,"0a1f78b3",null);u.options.__file="Order.vue";e["default"]=u.exports}}]);
//# sourceMappingURL=Order.9c4445b8.js.map